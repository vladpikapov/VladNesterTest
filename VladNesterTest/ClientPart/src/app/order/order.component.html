<div class="row mt-5">
  <div class="col-10">
  <table class="table table-dark  ">
    <tr>
      <th>â„–</th>
      <th>Customer</th>
      <th>Order status</th>
      <th>Start date</th>
      <th>Date of receiving</th>

    </tr>
    <tr *ngFor="let order of Orders">
      <td>
        {{order.id}}
      </td>
      <td>
        {{order.ordererName}}
      </td>
      <td *ngIf="EditOrderId === order.id">
        <label>
          <select [(ngModel)]="order.orderStatus">
            <option>
              Formation
            </option>
            <option>
              Waiting for delivery
            </option>
            <option>
              Delivered
            </option>
          </select>
        </label>
      </td>
      <td *ngIf="EditOrderId !== order.id" (click)="changeStatus(order.id)">
        {{order.orderStatus}}
      </td>
      <td>
        {{order.startDate |date:"dd.MM.yyyy"}}
      </td>
      <td *ngIf="order.endDate === null">
        not received...
      </td>
      <td *ngIf="order.endDate != null">
        {{order.endDate|date:"dd.MM.yyyy"}}
      </td>
      <td>
      <table class="table text-light ">
        <tr *ngFor="let product of order.orderedProducts">
            <td>
              {{product.product.name}}
            </td>
            <td>
              {{product.product.country}}
            </td>
            <td>
              {{product.product.type}}
            </td>
            <td>
              {{product.countProduct}}
            </td>
        </tr>
      </table>
      </td>
      <td *ngIf="EditOrderId === order.id">
        <button class="btn btn-success" (click)="saveOrderStatus(order)">Save</button>
      </td>
    </tr>
  </table>
</div>
  <div class="ml-5 pl-3 pt-3 mt-4">
  <button type="button" (click)="getProducts()" class="btn btn-dark" data-toggle="modal" data-target="#exampleModal">
    Add order
  </button>
  </div>
</div>



<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Add order</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form (ngSubmit)="addOrder(addForm.value)" [formGroup]="addForm">
          <label>
            <input type="text" class="form-control" formControlName="ordererName"/>
          </label>
          <label>
            <input type="date" class="form-control" formControlName="startDate"/>
          </label>
          <div formArrayName="orderedProducts" *ngFor="let item of this.addForm.get('orderedProducts').controls; let i = index">
            <div [formGroupName]= "i" class="list-group-item">
              <div formGroupName="product">
                <label>
                  <select formControlName="id">

                  </select>
                </label>
              </div>
              <label>
                <input type="range" min="1" max="10" formControlName="countProduct">
              </label>
            </div>
            <button (click)="removeFromProductList(i)" class="btn btn-outline-dark">Remove product</button>
            </div>
          <button (click)="addToProductList()" class="btn btn-outline-dark">Add product</button>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary" [disabled]="!this.addForm.valid">Add</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
